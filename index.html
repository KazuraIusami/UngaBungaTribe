<!DOCTYPE html>
<html>

  <head>

    <title>UNGA - Powered by Aztech</title>
	  <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/KazuraIusami/UngaBungaTribe/main/UNGA.ico">

  </head>
  <body>


    <script src="contextWindow.js"></script>
    <script src="realTime.js"></script>
    <script src="ASCII.js"></script>

    <script>

      //IN GAME TIME WINDOW AND FUNCTION
	let day = 0;
	let InGametime = 720; // Set initial time to 12:00 (720 minutes)
	let brightestTime = 840; // Set the brightest time to 14:00 (840 minutes)

	let phase = 'Midnight';
	let hours = Math.floor(InGametime / 60);
    let minutes = InGametime % 60;
    let formattedTime = `${hours < 10 ? '0' : ''}${hours}:${minutes < 10 ? '0' : ''}${minutes}`;

  let inverseColor;
  let backgroundColor;
	function updateTime() {			//THIS IS THE SINGLE TICK TIME FUNCTION
		InGametime += 1;

		hours = Math.floor(InGametime / 60);
		minutes = InGametime % 60;
		formattedTime = `${hours < 10 ? '0' : ''}${hours}:${minutes < 10 ? '0' : ''}${minutes}`;


		let brightness;
		if (InGametime < brightestTime) {
			brightness = InGametime / brightestTime; // Brightness increases until the brightest time
		} else {
			brightness = 1 - (InGametime - brightestTime) / (1440 - brightestTime); // Brightness decreases after the brightest time
		}

		backgroundColor = `rgb(${brightness * 255 - 40}, ${brightness * 255 - 40}, ${brightness * 255 - 20})`;
		document.body.style.backgroundColor = backgroundColor;

		 // Calculate inverse color for text
		inverseColor = `rgb(${255 - (brightness * 255 - 40)}, ${255 - (brightness * 255 - 40)}, ${255 - (brightness * 255 - 20)})`;


		if (InGametime > 1440) {
			let diff = InGametime - 1440;
			console.log(diff);
			InGametime = 0;
			day++;
			console.log("New Day! Day : " + day );

		}

										if(InGametime < 119){							//00:00 -> 02:00
											phase = "Midnight";
										}else if(InGametime > 119 && InGametime < 359){		//02:00 -> 06:00
											phase = "Early Morning";
										}else if(InGametime > 359 && InGametime < 539){		//06:00 -> 09:00
											phase = "Morning";
										}else if(InGametime > 539 && InGametime < 719){		//09:00 -> 12:00
											phase = "Late Morning";
										}else if(InGametime > 719 && InGametime < 779){		//12:00 -> 13:00
											phase = "High Noon";
										}else if(InGametime > 779 && InGametime < 960){		//13:00 -> 16:00
											phase = "Afternoon";
										}else if(InGametime > 960 && InGametime < 1080){	//16:00 -> 18:00
											phase = "Late Afternoon";
										}else if(InGametime > 1080 && InGametime < 1320){ 	//18:00 -> 22:00
											phase = "Evening";
										}else if(InGametime > 1320){					//22:00 -> 24:00
											phase = "Night";
										}

	}



	let tickTime = 100;

	let tickInterval = setInterval(updateTime, tickTime); //tickTime = ms

      let timeWindow = new ContextWindow("Time And Date", 0, 0, 1);
      timeWindow.setText("Current Real Time : " + currentFormattedText);

      timeWindow.addButton("Clean Window", () => {timeWindow.changeBackgroundColor("#00000001"); timeWindow.setButtonVisibility(1, false)}, 1);

      let timeWindowInterval = setInterval(() => {timeWindow.setText(`Current Time : ${currentFormattedText} <br> ${sessionTimeText} <br> <hr> <br>`+
                                                                      `In Game Time: ${formattedTime}`); timeWindow.changeFontColor(inverseColor)}, 16);
//Big Man Message
        let BigManMessage = new ContextWindow("Message from the Big Man", window.innerWidth/2.5, 0);
        BigManMessage.setText("hai so dont eat the forbidden fruit ok gotta go thx bye");
        setTimeout( () => {BigManMessage.toggleVisibility("hidden")}, 500 );

//SNAKE WINDOW
      let SnakeWindow = new ContextWindow("Snake", window.innerWidth/2.5, window.innerHeight/5, 6);
      SnakeWindow.setText(sleepingSnake);

      SnakeWindow.changeFontSize("12px");
      let snakeAwake = false;

      let snakeLine1Array = ["", "Are you sure you don't want some fruit?", "Come on, you are bound to grow hungry sooner or later!", "No please, you MUSSSST try the fruit", "Come on I INSSSISSSST on trying the fruit",
                             "The...fruit.?.Itsss right over there...Cmon I know you see it.", "...", "You sure you aren't hungry yet?", "...Fruit...Right over there.", ". .- - / - .... . / ..-. .-. ..- .. -"];
      let currentSnakeNode = 0;


      let snakeLine1 = 'Hello there';
      let snakeLine2= '';

      SnakeWindow.addButton("Interact", () => {   if (!snakeAwake) {
                                                      SnakeWindow.setText(snakeLine1 + "<br>" + snakeLine2 + Snake);
                                                      snakeAwake = true;
                                                      console.log("Snake has woken up");
                                                  } else if (snakeAwake && currentSnakeNode === 0) {
                                                      ForbiddenFruitWindow.toggleVisibility("visible");
                                                      snakeLine1 = "Would you like some...fruit?";
                                                      snakeLine2 = "hisss....Hiss...";
                                                      SnakeWindow.setText(snakeLine1 + "<br>" + snakeLine2 + Snake);
                                                      console.log("Snake is asking about fruits");
                                                      currentSnakeNode++;
                                                  } else if (currentSnakeNode >= 1 && currentSnakeNode < 10) {
                                                      snakeLine1 = snakeLine1Array[currentSnakeNode];
                                                      SnakeWindow.setText(snakeLine1 + "<br>" + snakeLine2 + Snake);
                                                      currentSnakeNode++;
                                                      console.log("Snake insists");
                                                  } else if (currentSnakeNode >= 10) {
                                                      snakeLine1 = "JUST EAT THE";
                                                      snakeLine2 = "FUCKING FRUIT";
                                                      SnakeWindow.changeFontColor("#350000");
                                                      SnakeWindow.changeBackgroundColor("#b5b5b580");
                                                      SnakeWindow.setText(snakeLine1 + "<br>" + snakeLine2 + Snake);
                                                      console.log("Snake is angry");
                                                      SnakeWindow.setButtonVisibility(1, false);
                                                      setInterval(flickTongue, 800);
                                                }
                                                 flickTongue()
                                              }, 1);



      function flickTongue(){
        setTimeout( () => {SnakeWindow.setText(snakeLine1 + "<br>"+ snakeLine2 + FlickedTongue)}, 16);
        setTimeout( () => {SnakeWindow.setText(snakeLine1 + "<br>"+ snakeLine2 + Snake)}, 300);
      };

      let birdArrived = false;

//FORBIDDEN FRUIT
  let ForbiddenFruitWindow = new ContextWindow("The Forbidden Fruit", window.innerWidth/5.5, window.innerHeight/1.75);
      ForbiddenFruitWindow.toggleVisibility("hidden");
      ForbiddenFruitWindow.setText(ForbiddenFruit);
      ForbiddenFruitWindow.changeFontSize("9px");


    ForbiddenFruitWindow.addButton("Inspect the forbidden fruit", () => {
                                      if(!birdArrived){
                                          BirdWindow.toggleVisibility("visible"); birdFlies();BirdWindow.bringToFront();
                                          setTimeout( () => { BirdWindow.setButtonVisibility(1, true)}, 1500);
                                          birdArrived = true;

                                      }else {
                                         console.log("Bird is watching")
                                      }
                                      }, 1);

//Bird

    let BirdLine1 = 'SQUAWK';
    let BirdLine2 = 'You sure?';

    let hasBroughtBIRD = false;

  let BirdWindow = new ContextWindow("The Bird", window.innerWidth/5.5, window.innerHeight/7);
      BirdWindow.setText(birdFlyingDown);
      BirdWindow.changeFontSize("4px");
      BirdWindow.toggleVisibility("hidden");

  BirdWindow.addButton("Well...What else am I going to do?", () => {BirdWindow.setButtonVisibility(1, false); BirdLine2 = "Hang on for a moment";BirdWindow.setText("<span style='font-size:12px'>" + BirdLine1 + "<br>" + BirdLine2 + "</span> <br>"+ bird)
                                                                      setTimeout( () => {BirdLine2 = "Here, I brought you something"; birdFlies();}, 500 )
                                                                      setTimeout( () => {BIRD.toggleVisibility("visible")},2000)
                                                                      setTimeout( () => {BirdLine2 = "This way, you won't have to worry about looking at the window. You can close the window and come back later.";
                                                                                          BirdWindow.setText("<span style='font-size:12px'>" + BirdLine1 + "<br>" + BirdLine2 + "</span> <br>"+ bird);
                                                                                        },5000)
                                                                    },1);
  BirdWindow.setButtonVisibility(1, false);

  function birdFlies(){
     setTimeout( () => {BirdWindow.setText(birdFlyingDown)},16);
     setTimeout( () => {BirdWindow.setText(birdFlyingUp)},300);
     setTimeout( () => {BirdWindow.setText(birdFlyingDown)},500);
     setTimeout( () => {BirdWindow.setText(birdFlyingUp)},800);
     setTimeout( () => {BirdWindow.setText(birdFlyingDown)},1100);
     setTimeout( () => {BirdWindow.setText("<span style='font-size:12px'>" + BirdLine1 + "<br>" + BirdLine2 + "</span> <br>"+ bird);},1500);
  }
//B.I.R.D.

      let BIRD = new ContextWindow("B.I.R.D. Device", 0, window.innerHeight/5);
      BIRD.toggleVisibility("hidden");
      BIRD.setText("Body Imaging and Resource Distribution device (B.I.R.D.)");

        BIRD.addButton("The EDEN preset", () => {  SnakeWindow.toggleVisibility("visible");
                                                  ForbiddenFruitWindow.toggleVisibility("visible");
                                                  BirdWindow.toggleVisibility("visible")}, 1);

        BIRD.addButton("[Close] The EDEN preset", () => {  SnakeWindow.toggleVisibility("hidden");
                                                  ForbiddenFruitWindow.toggleVisibility("hidden");
                                                  BirdWindow.toggleVisibility("hidden")}, 1);

        BIRD.addButton("Snake Window", () => {SnakeWindow.toggleVisibility("visible")},2);
        BIRD.addButton("Fruit Window", () => {ForbiddenFruitWindow.toggleVisibility("visible")}, 2);
        BIRD.addButton("The Bird", () => {BirdWindow.toggleVisibility("visible")}, 2);

        BIRD.addButtonBreak(3);

        BIRD.addButton("The Cat", () => {catWindow.toggleVisibility("visible")}, 4);

//CAT
      //I REALLY had to stop myself from calling this variable "catcall", you are welcome fuck you
      let catLineArray = ["Get out of here! I'm trying to ambush the bird...you are going to give up my cover!", "...Get out! Get out of here!"];
      let catNode = 0;
      let catWindow = new ContextWindow("The Cat", window.innerWidth/1.5, window.innerHeight/5);
      catWindow.setText("<span style='font-size:12px'>" + catLineArray[catNode] + "</span><br>"+ cat);
      catWindow.changeFontSize("9px");
      catWindow.toggleVisibility("hidden");

      catWindow.addButton("Interact", () => {catNode++; catWindow.setText("<span style='font-size:12px'>" + catLineArray[catNode] + "</span><br>"+ cat);}, 1);

    </script>

  </body>

</html>
