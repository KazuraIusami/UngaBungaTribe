<html>
	<!-- Current project is a time based day/night cycle with day phase implimentation-->
<head>
	<title>UNGA - Powered by Aztech</title>

		<link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/KazuraIusami/UngaBungaTribe/main/UNGA.ico">
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Jacquard+24&family=Lugrasimo&display=swap" rel="stylesheet">
	<style>
	
body {
font-family: "Lugrasimo", cursive;
font-size: 24px;
padding-top: 100px;
}

#timeDiv{
text-align: center;
display: none;
overflow: auto;
}

#content {

}
.animate-fade {
  opacity: 1;
  transition: 0.1s;
  float:left;
  top:15%;
  left: 5%;
  position: absolute; 
  color: green
}

.content {
text-align: center;
width: 80%;
height: 80%;
margin: auto;
background-color:black;
border-radius: 50px;
color: white;
padding:15px;
}

#InvUI {
border: 1px solid white;
display: none;
}
#vampireTeethCounter {
	top:30%;
}
#deckCounter {
	top:20%;
}

#poemContainer {
display: none;
}
#cardsDiv {
	inline: block;
	display: none;
}
.hoverable:hover {
	transition: color 2s;
	color: #C10633;
}
</style>
</head>
<body>
	
<div id="timeDiv">	
		<div style="float:left; position: absolute" id="ungaCoin"></div> <div class="animate-fade" id="addedCoins"></div>
		<div style="float:left; position: absolute" id="deckCounter" class="hoverable"></div>
		<div style="float:left; position: absolute" id="vampireTeethCounter"></div>
		<div id="locationSelector" style="position: absolute; right: 5%;">
			<p onclick="changeLocation(cemetary)" class="hoverable">Cemetary</p>
			<p onclick="changeLocation(casino)" class="hoverable">Casino</p>									
		</div>
	  
		<input type="text" id="nameInput" placeholder="Enter a Name" style="text-align:center"><p id="name"></p> <button onclick="submitName()" id="submitButton">Submit</button>
		<div id="locationUI"></div>
		<div id="dayDisplay">Day : 0 </div>
		<div id="timeDisplay">Time: 00:00</div>
		<div id="phaseDisplay">Phase : Midnight</div>
	  
		
		<button onclick="toggleInterval()" id="timeButton">Pause/Resume</button>
		<button onclick="save()" id="saveButton">Save!</button>
		<button onclick="load()">Load!</button>
		<button onclick="toggleAutosave();" id="toggleAutosaveButton">Toggle Autosave!</button>
		<button onclick="deleteSave()">Delete Save (ALL progress will be lost)</button>
		<button onclick="changeTickTime(20)">Fast Speed</button>
		<button onclick="changeTickTime(100)">Normal Speed</button>
		<button onclick="changeTickTime(600)">Slow Speed</button>
		<button onclick="changeTickTime(1500)">FRENCH DELAY Speed</button>
		
		
		<br>
</div>	  
	
<div id="content" class="content">
	<h1>UNGABUNGA TRIBE STUDIOS - UNGA </h1>
	<br> <hr>
	<p style="text-align:left">That's right. UNGABUNGA TRIBE STUDIOS is now live and active. What now? Do we take over the world? Maybe. Might as well start referring to us as the <span id="easterEggU">(U)</span>nited <span id="easterEggN">(N)</span>ations of <span id="easterEggG">(G)</span>reat <span id="easterEggA">(A)</span>merica, if we keep up this pace.</p>
	<br>
	<p style="text-align:left">In all seriousness, this will be the place where I put all my current projects. No schedule, no planned future events as of now.</p> 
	<br>
	<p style="text-align:left">But in <span id="UNGA" onclick="toggleDisplay()">time</span> things will start to appear here, so don't forget to come back. And who knows, maybe there are already some <span onclick='document.getElementById("content").style.display = "none"; document.getElementById("poemContainer").style.display = "none"; document.getElementById("InvUI").style.display = "block";'> hidden goodies here ;) </span></p>
</div>

<div id="poemContainer" class="content"> <!-- START OF BONEDOG POEM -->
		<div id="poem1">Coming home is terrible
		whether the dogs lick your face or not;
		whether you have a wife
		or just a wife-shaped loneliness waiting for you.
		Coming home is terribly lonely,
		so that you think
		of the oppressive barometric pressure
		back where you have just come from
		with fondness,
		because everything’s worse
		once you’re home.<br>(1/9)</div>
		<div id="poem2">You think of the vermin
		clinging to the grass stalks,
		long hours on the road,
		roadside assistance and ice creams,
		and the peculiar shapes of
		certain clouds and silences
		with longing because you did not want to return.
		Coming home is
		just awful.<br>(2/9)</div>
		<div id="poem3">And the home-style silences and clouds
		contribute to nothing
		but the general malaise.
		Clouds, such as they are,
		are in fact suspect,
		and made from a different material
		than those you left behind.
		You yourself were cut
		from a different cloudy cloth,
		returned,
		remaindered,
		ill-met by moonlight,
		unhappy to be back,
		slack in all the wrong spots,
		seamy suit of clothes
		dishrag-ratty, worn.<br>(3/9)</div>
		<div id="poem4">You return home
		moon-landed, foreign;
		the Earth’s gravitational pull
		an effort now redoubled,
		dragging your shoelaces loose
		and your shoulders
		etching deeper the stanza
		of worry on your forehead.
		You return home deepened,
		a parched well linked to tomorrow
		by a frail strand of…<br>(4/9)</div>
		<div id="poem5">Anyway… (5/9)</div>
		<div id="poem6">You sigh into the onslaught of identical days.
		One might as well, at a time…<br>(6/9)</div>
		<div id="poem7">Well…
		Anyway…
		You’re back.<br>(7/9)</div>
		<div id="poem8">The sun goes up and down
		like a tired whore,
		the weather immobile
		like a broken limb
		while you just keep getting older.
		Nothing moves but
		the shifting tides of salt in your body.
		Your vision blears.
		You carry your weather with you,
		the big blue whale,
		a skeletal darkness.<br>(8/9)</div>
		<div id="poem9">You come back
		with X-ray vision.
		Your eyes have become a hunger.
		You come home with your mutant gifts
		to a house of bone.
		Everything you see now,
		all of it: bone.<br>(9/9)</div>
</div>
										<!-- END OF BONEDOG POEM -->
  
<div id="InvUI" class="content"></div>  

<div id="cardsDiv" class="content"> <img id="cardOneElement" src="https://raw.githubusercontent.com/KazuraIusami/UngaBungaTribe/main/Cards/ACE%20SPADES.PNG" style="width: 400px; height: 600px">
									<img id="cardTwoElement" src="https://raw.githubusercontent.com/KazuraIusami/UngaBungaTribe/main/Cards/ACE%20SPADES.PNG" style="width: 400px; height: 600px">
</div>
  <script>
	let name;
	
	let autosaveEnabled = false;
	
	let ungaCoin = 0;
	
	let day = 0;
	let time = 720; // Set initial time to 12:00 (720 minutes)
	const brightestTime = 840; // Set the brightest time to 14:00 (840 minutes)
	
	let phase = 'Midnight';
	let hours = Math.floor(time / 60);
    let minutes = time % 60;
    let formattedTime = `${hours < 10 ? '0' : ''}${hours}:${minutes < 10 ? '0' : ''}${minutes}`;
	
	
	
function updateTime() {			//THIS IS THE SINGLE TICK FUNCTION
    time += 1;
	
    
	hours = Math.floor(time / 60);
	minutes = time % 60;
	formattedTime = `${hours < 10 ? '0' : ''}${hours}:${minutes < 10 ? '0' : ''}${minutes}`;
	
	if(currentLocation.name){
	document.getElementById('locationUI').textContent = `Location : ${currentLocation.name}`;
	}
	
    document.getElementById('timeDisplay').textContent = `Time: ${formattedTime}`;
	document.getElementById('dayDisplay').textContent = `Day: ${day}`;
	document.getElementById('ungaCoin').textContent = `UngaCoin(TM): ${ungaCoin}`;
		if(cardStates){
			document.getElementById("deckCounter").textContent = `♠ ${cardStates[0]} / ♥ ${cardStates[1]} / ♣ ${cardStates[2]} / ♦ ${cardStates[3]}`;
		}
		if(vampireTeethUsed){
			document.getElementById("vampireTeethCounter").textContent = `Vampire Teeth used: ${vampireTeethUsed}`;
		}
		
	
    let brightness;
    if (time < brightestTime) {
        brightness = time / brightestTime; // Brightness increases until the brightest time
    } else {
        brightness = 1 - (time - brightestTime) / (1440 - brightestTime); // Brightness decreases after the brightest time
    }
    
    const backgroundColor = `rgb(${brightness * 255 - 40}, ${brightness * 255 - 40}, ${brightness * 255 - 20})`;
    document.body.style.backgroundColor = backgroundColor;
	
	 // Calculate inverse color for text
    const inverseColor = `rgb(${255 - (brightness * 255 - 40)}, ${255 - (brightness * 255 - 40)}, ${255 - (brightness * 255 - 20)})`;
    document.getElementById("timeDiv").style.color = inverseColor;
    
    if (time > 1440) {
        time = 0;
		day++;
		console.log("New Day! Day : " + day );
		document.getElementById('dayDisplay').textContent = `Day: ${day}`;
    }
	
									if(time < 119){							//00:00 -> 02:00
										phase = "Midnight";
									}else if(time > 119 && time < 359){		//02:00 -> 06:00
										phase = "Early Morning";	
									}else if(time > 359 && time < 539){		//06:00 -> 09:00
										phase = "Morning";
									}else if(time > 539 && time < 719){		//09:00 -> 12:00
										phase = "Late Morning";
									}else if(time > 719 && time < 779){		//12:00 -> 13:00
										phase = "High Noon";
									}else if(time > 779 && time < 960){		//13:00 -> 16:00
										phase = "Afternoon";
									}else if(time > 960 && time < 1080){	//16:00 -> 18:00
										phase = "Late Afternoon";
									}else if(time > 1080 && time < 1320){ 	//18:00 -> 22:00
										phase = "Evening";
									}else if(time > 1320){					//22:00 -> 24:00
										phase = "Night";
									}
											
	document.getElementById("phaseDisplay").textContent = `Phase : ${phase}`;
	
	
}

let tickTime = 100;
//Function to start and stop the interval
let tickInterval = setInterval(updateTime, tickTime); //tickTime = ms

function changeTickTime(newTickTime){
	clearInterval(tickInterval);
	tickTime = newTickTime;
	tickInterval = setInterval(updateTime, tickTime); //tickTime = ms
}

function toggleInterval(){ //TOGGLE TIME INTERVAL
	const timeButton = document.getElementById("timeButton");
	if(!tickInterval){
		tickInterval = setInterval(updateTime, 100);
		startDropInterval();
		timeButton.style.border = "2px solid green";
	}else {
		clearInterval(tickInterval);
		if(dropInterval){ clearInterval(dropInterval) };
		timeButton.style.border = "2px solid red";
		tickInterval = null;
	}
}


function toggleDisplay() { //Toggles the TIME DISPLAY (the thing that happens when you click time)
    var timeDiv = document.getElementById("timeDiv");
	timeDiv.style.display == 'none' || timeDiv.style.display == '' ? timeDiv.style.display = 'block' : timeDiv.style.display = 'none';
}

function submitName(){
	name = document.getElementById("nameInput").value;
	document.getElementById("name").textContent = `${name}`;
	document.getElementById("nameInput").style.display = "none";
	document.getElementById("submitButton").style.display = "none";
}

// // // // // LOCATION STUFF // // // // //

function changeLocation(newLocation){
currentLocation = newLocation;
currentDrops = currentLocation.drops
}


	//Vampire easter egg//
		let vampireTeethUsed = 0;
		
	//Card states
		let cardStates = [false, false, false, false]
let cemetary = {
	name: "Cemetary",
	drops:  [	{name: "(L)Unga Coin", 
        type: "Coin Supply", 
        quantity: 1, 
        dropRate: 0.08, 
        phase: "High Noon",
        use: function() {
            let addedValue = Math.floor(Math.random() * 200) + 50;
            ungaCoin += addedValue + this.rarity;
            console.log("Coin added : " + addedValue + " ( +" +  this.rarity + ")");
            document.getElementById("addedCoins").innerHTML = "+" + addedValue + "(+ " + this.rarity + ")";
            document.getElementById("addedCoins").style.transition = "opacity 0.5s";
            document.getElementById("addedCoins").style.opacity = 1;
            setTimeout(() => {
                document.getElementById("addedCoins").style.opacity = 0;
            }, 2000);
        }
    },
    { 	name: "(S)Unga Coin", 
        type: "Coin Supply", 
        quantity: 1, 
        dropRate: 0.07, 
        phase: "Afternoon",
        use: function() {
            let addedValue = Math.floor(Math.random() * 200) + 15;
            ungaCoin += addedValue + this.rarity;
            console.log("Coin added : " + addedValue + " ( +" +  this.rarity + ")");
            document.getElementById("addedCoins").innerHTML = "+" + addedValue + "(+ " + this.rarity + ")";
            document.getElementById("addedCoins").style.transition = "opacity 0.5s";
            document.getElementById("addedCoins").style.opacity = 1;
            setTimeout(() => {
                document.getElementById("addedCoins").style.opacity = 0;
            }, 2000);
        }
    },
	{ 	name: "Spades set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.09, 
        phase: "Midnight",
        use: function() {
            cardStates[0] = true;
			console.log("Added a spades set to your deck");
			if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Hearts set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.045, 
        phase: "Evening",
        use: function() {
            cardStates[1] = true;
			console.log("Added a hearts set to your deck");
				if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Clubs set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.06, 
        phase: "Late Morning",
        use: function() {
            cardStates[2] = true;
			console.log("Added a clubs set to your deck");
			if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Diamonds set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.045, 
        phase: "Early Morning",
        use: function() {
            cardStates[1] = true;
			console.log("Added a diamonds set to your deck");
			if(cardStates[3] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	
	
	{ 	name: "Sabotnik Blood", //MIDNIGHT 
        type: "Cryptid Item", 
        quantity: 1, 
        dropRate: 0.25, 
        phase: "Midnight",
        use: function() {
			if(phase === "Midnight"){
				let index = currentDrops.findIndex(item => item.name === "Vampiric Tooth");
				
				inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
				console.log("A vampire tooth materializes from the blood...");
			}
            console.log("The blood sizzles, leaving a taste of iron in your lungs.")
        }
    },
	{ 	name: "Sabotnik Blood", //NIGHT
        type: "Cryptid Item", 
        quantity: 1, 
        dropRate: 0.15, 
        phase: "Night",
        use: function() {
			if(phase === "Midnight"){
				let index = currentDrops.findIndex(item => item.name === "Vampiric Tooth");
				
				inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
				console.log("A vampire tooth materializes from the blood...");
			}
            console.log("The blood sizzles, leaving a taste of iron in your lungs.")
        }
    },
	{ 	name: "Vampiric Tooth", 
        type: "Cryptid Item", 
        quantity: 1, 
        dropRate: 0.025, 
        phase: "Midnight",
        use: function() {
			
			vampireTeethUsed++;
			console.log("You must combine 8 Vampire teeth. Total used so far: " + vampireTeethUsed);
			
				if(vampireTeethUsed > 7){
					let index = currentDrops.findIndex(item => item.name === "Vampiric Doll");
					inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
					vampireTeethUsed = 0;
				}
			
        }
    },
	{ 	name: "Vampiric Doll", 
        type: "Crafted Cryptid Item", 
        quantity: 1, 
        dropRate: 0.0, 
        phase: "Midnight",
        use: function() {
			
			console.log("Vampiric Doll Used");
			
        }
    },
	{ 	name: "Full Deck of Cards", 
        type: "Card set (Complete)", 
        quantity: 1, 
        dropRate: 0, 
        phase: "Evening",
        use: function() {
           console.log("What a waste");
        }
    }]
}

let casino = { 
	name: "Evade Casino",
	drops:  [{ 	name: "Spades set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.09, 
        phase: "Late Morning",
        use: function() {
            cardStates[0] = true;
			console.log("Added a spades set to your deck");
			if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Hearts set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.045, 
        phase: "Late Morning",
        use: function() {
            cardStates[1] = true;
			console.log("Added a hearts set to your deck");
				if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Clubs set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.06, 
        phase: "Late Morning",
        use: function() {
            cardStates[2] = true;
			console.log("Added a clubs set to your deck");
			if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Diamonds set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.045, 
        phase: "Late Morning",
        use: function() {
            cardStates[3] = true;
			console.log("Added a diamonds set to your deck");
			if(cardStates[3] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Spades set", //EVENING
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.09, 
        phase: "Evening",
        use: function() {
            cardStates[0] = true;
			console.log("Added a spades set to your deck");
			if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Hearts set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.045, 
        phase: "Evening",
        use: function() {
            cardStates[1] = true;
			console.log("Added a hearts set to your deck");
				if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Clubs set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.06, 
        phase: "Evening",
        use: function() {
            cardStates[2] = true;
			console.log("Added a clubs set to your deck");
			if(cardStates[0] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Diamonds set", 
        type: "Card set", 
        quantity: 1, 
        dropRate: 0.045, 
        phase: "Evening",
        use: function() {
            cardStates[3] = true;
			console.log("Added a diamonds set to your deck");
			if(cardStates[3] && cardStates[1] && cardStates[2] && cardStates[3]){
						let index = currentDrops.findIndex(item => item.name === "Full Deck of Cards");
						inventory.addItem( new Item( currentDrops[index].name, currentDrops[index].type, 1, Math.floor(Math.random() * 100), currentDrops[index].phase, currentDrops[index].use) );
						cardStates = [false, false, false, false];
				}
        }
    },
	{ 	name: "Full Deck of Cards", 
        type: "Card set (Complete)", 
        quantity: 1, 
        dropRate: 0, 
        phase: "Evening",
        use: function() {
           console.log("What a waste");
        }
    }]
}

let currentLocation = cemetary;


// // // // // INVENTORY STUFF // // // // // 


	// // // // // // CURRENT DROPS START // // // // //
let currentDrops = currentLocation.drops;
	// // // // // // CURRENT DROPS END // // // // //

const dropRateInterval = 1000; // Interval in milliseconds

function addToInventory(item) {
    inventory.addItem(new Item(item.name, item.type, item.quantity, Math.floor(Math.random() * 100), item.phase, item.use));
}
let dropInterval;
function startDropInterval() {
    dropInterval = setInterval(() => {
        for (let index = 0; index < currentDrops.length; index++) {
            const item = currentDrops[index];
            // Logic to determine if the item should be dropped
            const dropRoll = Math.random();
            if (dropRoll < item.dropRate && phase === item.phase) {
                // Add item to inventory
                addToInventory(item);

                setTimeout((itemName) => {
                    // Find the index of the item by name
                    let itemIndex = inventory.items.findIndex(invItem => invItem.name === itemName);
                    // Check if the item exists in the inventory
                    if (itemIndex !== -1) {
                        // Remove the item from the inventory
                        inventory.removeItem(itemIndex);
                    }
                }, 5000, item.name);
            }
        }
    }, dropRateInterval);
}
startDropInterval(); // default start with on

class Item {
    constructor(name, type, quantity = 1, rarity = Math.floor(Math.random() * 100), phase, use) {
        this.name = name;
        this.type = type;
        this.quantity = quantity;
		this.rarity = rarity;
		this.phase = phase;
		this.use = use;
    }
}

class Inventory {
    constructor() {
        this.items = [];
    }

    addItem(newItem) {
        const existingItemIndex = this.items.findIndex(item => 
            item.name === newItem.name && item.type === newItem.type
        );

        if (existingItemIndex > -1) {
            this.items[existingItemIndex].quantity += newItem.quantity;
            this.items[existingItemIndex].rarity = Math.floor(((this.items[existingItemIndex].rarity * this.items[existingItemIndex].quantity) + newItem.rarity) / (this.items[existingItemIndex].quantity + 1));
        } else {
            this.items.push(newItem);
        }
        this.listItems();
    }

    removeItem(index, quantity = 1) {
        if (index >= 0 && index < this.items.length) {
            if (this.items[index].quantity > quantity) {
                this.items[index].quantity -= quantity;
            } else {
                this.items.splice(index, 1);
            }
        } else {
            console.log(`Invalid index: ${index}`);
        }
        this.listItems();
    }

    listItems() {
        const InvUI = document.getElementById("InvUI");
        InvUI.innerHTML = '';
        for (let i = 0; i < this.items.length; i++) {
            InvUI.innerHTML += "<br><span onclick='inventory.useItem(" + i + ")'>Name : " + this.items[i].name + " / Type : " + this.items[i].type + " /  Amt  : " + this.items[i].quantity + " / Rarity : " + this.items[i].rarity + "</span><br>";
        }

        InvUI.innerHTML += ' <h6 style="color: red; bottom: 5px;"> *WARNING:* Items here will NOT BE SAVED if you close the browser. </h6><br>';
    }

    useItem(index) {
        const item = this.items[index];
        item.use();
		console.log("Using " + item.name);
        this.removeItem(index);
    }
}

let inventory = new Inventory();
inventory.listItems();



// // // // // END OF INVENTORY // // // // //

// // // // // CARDS // // // // //

// Array of card names
const cards = [
  "ACE SPADES", "2 SPADES", "3 SPADES", "4 SPADES", "5 SPADES", "6 SPADES", "7 SPADES", "8 SPADES", "9 SPADES", "10 SPADES", "JACK SPADES", "QUEEN SPADES", "KING SPADES",
  "ACE HEARTS", "2 HEARTS", "3 HEARTS", "4 HEARTS", "5 HEARTS", "6 HEARTS", "7 HEARTS", "8 HEARTS", "9 HEARTS", "10 HEARTS", "JACK HEARTS", "QUEEN HEARTS", "KING HEARTS",
  "ACE DIAMONDS", "2 DIAMONDS", "3 DIAMONDS", "4 DIAMONDS", "5 DIAMONDS", "6 DIAMONDS", "7 DIAMONDS", "8 DIAMONDS", "9 DIAMONDS", "10 DIAMONDS", "JACK DIAMONDS", "QUEEN DIAMONDS", "KING DIAMONDS",
  "ACE CLUBS", "2 CLUBS", "3 CLUBS", "4 CLUBS", "5 CLUBS", "6 CLUBS", "7 CLUBS", "8 CLUBS", "9 CLUBS", "10 CLUBS", "JACK CLUBS", "QUEEN CLUBS", "KING CLUBS"
];

// Function to generate the URL
const pathTo = (card) => {
  const baseUrl = "https://raw.githubusercontent.com/KazuraIusami/UngaBungaTribe/main/Cards/";
  return baseUrl + encodeURIComponent(card) + ".PNG";
};

<!-- // Example usage -->
<!-- cards.forEach(card => { -->
  <!-- console.log(pathTo(card)); -->
<!-- }); -->
document.getElementById("cardOneElement").src = pathTo(cards[ Math.floor(Math.random() * 100) % 52 ]);
document.getElementById("cardTwoElement").src = pathTo(cards[ Math.floor(Math.random() * 100) % 52 ]);

// // // // // END OF CARDS // // // // //

// // // // // SAVING AND LOADING // // // // //
function save(){
	var currentSave = 	{SavedDay: day, 
						SavedHour: hours,
						SavedMinute: minutes,
						SavedTime: time,
						SavedName: name,
						SavedUngaCoin: ungaCoin,
						SavedVampireTeeth: vampireTeethUsed,
						SavedAutosaveSetting: autosaveEnabled}; //ALL STUFF SAVED DURING SAVE
						
						
	var stringed = JSON.stringify(currentSave);
	localStorage.setItem("currentSaveStringed", stringed)
	console.log("Saved. " + stringed)
	
	const saveButton = document.getElementById("saveButton");
	saveButton.style.border = "2px solid green";
	setTimeout(() => {
                saveButton.style.border = '1px solid black';
            }, 500);
}

function load() {
    // Check if 'currentSaveStringed' exists in localStorage
    if (localStorage.getItem('currentSaveStringed')) {
        // Retrieve the value and set it to currentSave
        var currentSave = JSON.parse(localStorage.getItem('currentSaveStringed'));
		
			day = currentSave.SavedDay;
			hours = currentSave.SavedHour;
			minutes = currentSave.SavedMinute;
			time = currentSave.SavedTime;
			name = currentSave.SavedName;
				document.getElementById("name").textContent = `${name}`; //Change html 
				if(currentSave.SavedUngaCoin){
				ungaCoin = currentSave.SavedUngaCoin;
				};
				if(currentSave.SavedVampireTeeth){
				vampireTeethUsed = currentSave.SavedVampireTeeth;
				}
			
				
			//Check to see what the autosave settings were
			autosaveEnabled = currentSave.SavedAutosaveSetting;	
        console.log('currentSave set to:', currentSave);
    } else {
        console.log('No current save found in localStorage.');
    }
}
load(); //we are talking, MEGA BRAIN 

//Should I do autosaving? Hmmmmm...Well I don't think it'll do any harm. Not personally, at least. What's disk space? /s 


let autosaveInterval = setInterval(() => {
            if (autosaveEnabled) {
                save();
            }else{
				saveButton.style.border = '2px dotted red';
				setTimeout(() => {
					saveButton.style.border = '1px solid black';
				}, 500);
			}
            console.log(autosaveEnabled ? "Autosave Enabled : True" : "Autosave Enabled : False");
        }, 5000); // Autosave every 5 seconds


//Lets get fancy and make the button change color depending on the value
const toggleAutosaveButton = document.getElementById("toggleAutosaveButton");
autosaveEnabled ? toggleAutosaveButton.style.border = "2px solid green" : toggleAutosaveButton.style.border = "2px solid red";

function toggleAutosave(){
	autosaveEnabled ? autosaveEnabled = false : autosaveEnabled = true; //Flip-a-da variables as the great Mario used to say
	autosaveEnabled ? toggleAutosaveButton.style.border = "2px solid green" : toggleAutosaveButton.style.border = "2px solid red";
	
	console.log(autosaveEnabled ? "Autosave Enabled : True" : "Autosave Enabled : False");
}
function deleteSave(){
	localStorage.clear();
	location.reload();
}

// // // // // END OF SAVING AND LOADING // // // // //

// // // // // POEM STUFF // // // // //

//So I really want to be able to have the poem Bonedog (from I'm Thinking of Ending Things) as a secret little compartment. Hidden, so if you are reading this, SHHHHH!

const poemContainer = document.getElementById("poemContainer");

	//Container that holds all seperate verses
const poemVerse = [document.getElementById("poem1"), document.getElementById("poem2"), document.getElementById("poem3"),
					document.getElementById("poem4"), document.getElementById("poem5"), document.getElementById("poem6"), document.getElementById("poem7"),
					document.getElementById("poem8"), document.getElementById("poem9"),]
					
for(let i = 0; i < poemVerse.length; i++){ 
	poemVerse[i].style.display = "none";
}
poemVerse[0].style.display = "block";
	
//Add a keylog listener
			
			document.body.addEventListener("keydown", (event) => {
				console.log(event.key);
					if(event.key === "u" || event.key === "U"){
						document.getElementById("easterEggU").style.color = "Gold";
					}
					if(event.key === "n" || event.key === "N"){
						document.getElementById("easterEggN").style.color = "Gold";
					}
					if(event.key === "g" || event.key === "G"){
						document.getElementById("easterEggG").style.color = "Gold";
					}
					if(event.key === "a" || event.key === "A"){
						document.getElementById("easterEggA").style.color = "Gold";
					}
					if(document.getElementById("easterEggU").style.color === "gold" && document.getElementById("easterEggN").style.color === "gold" && document.getElementById("easterEggG").style.color === "gold" && document.getElementById("easterEggA").style.color === "gold"){
						if(document.getElementById("UNGA").style.color != "gold"){
							document.getElementById("UNGA").style.color = "Gold";
							//TO DO: Add an item to the inventory when the player types UNGA. Previously was a large supply of ungacoin
						}
						
					}
					
					//Changing the slide of the poem (IN THE MOST UNGA WAY POSSBLE FFS)
						if(event.key === "1"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[0].style.display = "block";
						}
						if(event.key === "2"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[1].style.display = "block";
						}
						if(event.key === "3"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[2].style.display = "block";
						}
						if(event.key === "4"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[3].style.display = "block";
						}
						if(event.key === "5"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[4].style.display = "block";
						}
						if(event.key === "6"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[5].style.display = "block";
						}
						if(event.key === "7"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[6].style.display = "block";
						}
						if(event.key === "8"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[7].style.display = "block";
						}
						if(event.key === "9"){
							for(let i = 0; i < poemVerse.length; i++){ 
								poemVerse[i].style.display = "none";
							}
							poemVerse[8].style.display = "block";
						}
					
					
					//CHANGE TABS
						if(event.key === "["){
							document.getElementById("content").style.display = "block";
							document.getElementById("poemContainer").style.display = "none";
							document.getElementById("InvUI").style.display = "none";
						}
						if(event.key === "]"){
							document.getElementById("content").style.display = "none";
							document.getElementById("poemContainer").style.display = "block";
							document.getElementById("InvUI").style.display = "none";
						}
						if(event.key === "i"){
							document.getElementById("content").style.display = "none";
							document.getElementById("poemContainer").style.display = "none";
							document.getElementById("InvUI").style.display = "block";
						}
						if(event.key === "c"){
							if(document.getElementById("cardsDiv").style.display === "block"){
								document.getElementById("cardsDiv").style.display = "none";
							}else{
								document.getElementById("cardsDiv").style.display = "block";
							}
						}
						if(event.key === "t"){
							toggleDisplay();
						}
					
			});
			
			
			let pressedKeys = [];
			
			document.body.addEventListener("keydown", (event) => {
				
				pressedKeys[event.key.toUpperCase()] = true;
				pressedKeys[event.key.toLowerCase()] = true;
			});
			
			document.body.addEventListener("keyup", (event) => {
			
				pressedKeys[event.key.toUpperCase()] = false;
				pressedKeys[event.key.toLowerCase()] = false;
				
			})
  </script>
</body>
</html>
