<html>
	<!-- Current project is a time based day/night cycle with day phase implimentation-->
<head>
	<title>UNGA - Powered by Aztech</title>

		<link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/KazuraIusami/UngaBungaTribe/main/UNGA.ico">
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Jacquard+24&family=Lugrasimo&display=swap" rel="stylesheet">
	<style>
	
  body {
  /*  transition: background-color 1s ease; */
	
	font-family: "Lugrasimo", cursive;
    font-size: 24px;
    padding-top: 100px;
  }
	#timeDiv{
	text-align: center;
	display: none;
	}
	#content {
		text-align: center;
		width: 80%;
		height: 80%;
		margin: auto;
		background-color:black;
		border-radius: 50px;
		color: white;
		padding:15px;
	}
	
</style>
</head>
<body>
	
<div id="timeDiv">	
		<input type="text" id="nameInput" placeholder="Enter a Name" style="text-align:center"><p id="name"></p> <button onclick="submitName()" id="submitButton">Submit</button>
		<div id="dayDisplay">Day : 0 </div>
		<div id="timeDisplay">Time: 00:00</div>
		<div id="phaseDisplay">Phase : Midnight</div>
	  
		<button onclick="toggleInterval()">Pause/Resume</button>
		<button onclick="save()">Save!</button>
		<button onclick="load()">Load!</button>
		<button onclick="toggleAutosave();" id="toggleAutosaveButton">Toggle Autosave!</button>
		<button onclick="deleteSave()">Delete Save (ALL progress will be lost)</button>
		<br>
</div>	  
	
<div id="content">
	<h1>UNGABUNGA TRIBE STUDIOS - UNGA</h1>
	<br> <hr>
	<p style="text-align:left">Thats right. UNGABUNGA TRIBE STUDIOS is now live and active. What now? Do we take over the world? Maybe. Might as well start referring to us as the (U)nited (N)ations of (G)reat (A)merica, if we keep up this pace.</p>
	<br>
	<p style="text-align:left">In all seriousness, this will be the place where I put all my current projects. No schedule, no planned future events as of now.</p> 
	<br>
	<p style="text-align:left">But in <span onclick="toggleDisplay()">time</span> things will start to appear here, so don't forget to come back. And who knows, maybe there are already some hidden goodies here ;)</p>
</div>
  
  <script>
	let name;
	
	let autosaveEnabled = false;
	
	
	
	let day = 0;
	let time = 720; // Set initial time to 12:00 (720 minutes)
	const brightestTime = 840; // Set the brightest time to 14:00 (840 minutes)
	
	let phase = 'Midnight';
	let hours = Math.floor(time / 60);
    let minutes = time % 60;
    let formattedTime = `${hours < 10 ? '0' : ''}${hours}:${minutes < 10 ? '0' : ''}${minutes}`;
	
	//SURVIVAL STUFF
	let hunger = 1000;
	let hungerRate = 0.5;
	
function updateTime() {			//THIS IS THE SINGLE TICK FUNCTION
    time += 1;
	
    
	hours = Math.floor(time / 60);
	minutes = time % 60;
	formattedTime = `${hours < 10 ? '0' : ''}${hours}:${minutes < 10 ? '0' : ''}${minutes}`;
	
    document.getElementById('timeDisplay').textContent = `Time: ${formattedTime}`;
	document.getElementById('dayDisplay').textContent = `Day: ${day}`;
    
    let brightness;
    if (time < brightestTime) {
        brightness = time / brightestTime; // Brightness increases until the brightest time
    } else {
        brightness = 1 - (time - brightestTime) / (1440 - brightestTime); // Brightness decreases after the brightest time
    }
    
    const backgroundColor = `rgb(${brightness * 255 - 40}, ${brightness * 255 - 40}, ${brightness * 255 - 20})`;
    document.body.style.backgroundColor = backgroundColor;
	
	 // Calculate inverse color for text
    const inverseColor = `rgb(${255 - (brightness * 255 - 40)}, ${255 - (brightness * 255 - 40)}, ${255 - (brightness * 255 - 20)})`;
    document.body.style.color = inverseColor;
    
    if (time > 1440) {
        time = 0;
		day++;
		console.log("New Day! Day : " + day );
		document.getElementById('dayDisplay').textContent = `Day: ${day}`;
    }
	
	if(time < 119){							//00:00 -> 02:00
		phase = "Midnight";
	}else if(time > 119 && time < 359){		//02:00 -> 06:00
		phase = "Early Morning";
	}else if(time > 359 && time < 539){		//06:00 -> 09:00
		phase = "Morning";
	}else if(time > 539 && time < 719){		//09:00 -> 12:00
		phase = "Late Morning";
	}else if(time > 719 && time < 779){		//12:00 -> 13:00
		phase = "High Noon";
	}else if(time > 779 && time < 960){		//13:00 -> 16:00
		phase = "Afternoon";
	}else if(time > 960 && time < 1140){	//16:00 -> 19:00
		phase = "Late Afternoon";
	}else if(time > 1140 && time < 1320){ 	//19:00 -> 22:00
		phase = "Evening";
	}else if(time > 1320){					//22:00 -> 24:00
		phase = "Night";
	}
	document.getElementById("phaseDisplay").textContent = `Phase : ${phase}`;
	
	
}


//Function to start and stop the interval
let tickInterval = setInterval(updateTime, 100);

function toggleInterval(){ //TOGGLE TIME INTERVAL
	if(!tickInterval){
		tickInterval = setInterval(updateTime, 100);
	}else {
		clearInterval(tickInterval);
		tickInterval = null;
	}
}



function toggleDisplay() {
    var timeDiv = document.getElementById("timeDiv");
    timeDiv.style.display = timeDiv.style.display === "none" ? "block" : "none";
}

function submitName(){
	name = document.getElementById("nameInput").value;
	document.getElementById("name").textContent = `${name}`;
	document.getElementById("nameInput").style.display = "none";
	document.getElementById("submitButton").style.display = "none";
}

function save(){
	var currentSave = {SavedDay: day, SavedHour: hours, SavedMinute: minutes, SavedTime: time, SavedName: name, SavedAutosaveSetting: autosaveEnabled}; //ALL STUFF SAVED DURING SAVE
	var stringed = JSON.stringify(currentSave);
	localStorage.setItem("currentSaveStringed", stringed)
	console.log("Saved. " + stringed)
}

function load() {
    // Check if 'currentSaveStringed' exists in localStorage
    if (localStorage.getItem('currentSaveStringed')) {
        // Retrieve the value and set it to currentSave
        var currentSave = JSON.parse(localStorage.getItem('currentSaveStringed'));
		
			day = currentSave.SavedDay;
			hours = currentSave.SavedHour;
			minutes = currentSave.SavedMinute;
			time = currentSave.SavedTime;
			name = currentSave.SavedName;
				document.getElementById("name").textContent = `${name}`; //Change html 
				
			//Check to see what the autosave settings were
			autosaveEnabled = currentSave.SavedAutosaveSetting;	
        console.log('currentSave set to:', currentSave);
    } else {
        console.log('No current save found in localStorage.');
    }
}

load(); //we are talking, MEGA BRAIN 

//Should I do autosaving? Hmmmmm...Well I don't think it'll do any harm. Not personally, at least. What's disk space? /s 


let autosaveInterval = setInterval(() => {
            if (autosaveEnabled) {
                save();
            }
            console.log(autosaveEnabled ? "Autosave Enabled : True" : "Autosave Enabled : False");
        }, 10000); // Autosave every 10 seconds


//Lets get fancy and make the button change color depending on the value
const toggleAutosaveButton = document.getElementById("toggleAutosaveButton");
autosaveEnabled ? toggleAutosaveButton.style.border = "2px solid green" : toggleAutosaveButton.style.border = "2px solid red";

function toggleAutosave(){
	autosaveEnabled ? autosaveEnabled = false : autosaveEnabled = true; //Flip-a-da variables as the great Mario used to say
	autosaveEnabled ? toggleAutosaveButton.style.border = "2px solid green" : toggleAutosaveButton.style.border = "2px solid red";
	
	console.log(autosaveEnabled ? "Autosave Enabled : True" : "Autosave Enabled : False");
}
function deleteSave(){
	localStorage.clear();
}

  </script>
</body>
</html>
